<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <menuitem id="menu_ple_pe_root" name="Informes PLE" web_icon="ple_sale_book,static/description/icon.png" groups="account.group_account_user"/>
        <menuitem id="menu_ple_pe_monthly" name="PLE Mensual" parent="menu_ple_pe_root"/>
        <menuitem id="menu_ple_pe_yearly" name="PLE Anual" parent="menu_ple_pe_root"/>
        <menuitem id="menu_ple_inv_bal" name="PLE Inventarios y Balances" parent="menu_ple_pe_root"/>
        <menuitem id="account_tag_menu" parent="menu_ple_pe_root" action="account.account_tag_action"/>

        <record id="view_company_form_inherit" model="ir.ui.view">
            <field name="name">res.company.view.form.inherit</field>
            <field name="model">res.company</field>
            <field name="inherit_id" ref="base.view_company_form"/>
            <field name="arch" type="xml">
                <field name="sequence" position="before">
                    <field name="type_contributor"/>
                </field>
            </field>
        </record>

        <record id="view_ple_report_form" model="ir.ui.view">
            <field name="name">ple.report.base.form</field>
            <field name="model">ple.report.base</field>
            <field name="arch" type="xml">
                <form string="Reporte PLE">
                    <header>
                        <button name="action_generate_report" string="Actualizar InformaciÃ³n" type="object" states='draft'/>
                        <button name="action_generate_excel" string="Generar Reporte" type="object" states='draft'/>
                        <button name="action_close" string="Declarar a SUNAT" states='load' type="object"/>
                        <button name="action_rollback" string="Regresar a Borrador" states='load,closed' type="object"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="company_id"/>
                                <field name="date_start"/>
                                <field name="date_end"/>
                                <field name="state_send"/>
                                <field name="date_ple"/>
                                <field name="ple_type" invisible="True"/>
                            </group>
                            <group string="Reportes PLE" id="ple_sale">
                                <field name="xls_filename" invisible="1"/>
                                <field name="xls_binary" filename="xls_filename" readonly="1"/>
                            </group>
                        </group>
                        <field name="error_dialog" class="errorbox" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_ple_report_base_tree" model="ir.ui.view">
            <field name="name">ple.report.base.tree</field>
            <field name="model">ple.report.base</field>
            <field name="arch" type="xml">
                <tree string="Reporte PLE">
                    <field name="date_start"/>
                    <field name="date_end"/>
                    <field name="company_id"/>
                    <field name="date_ple"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="ple_report_base_action" model="ir.actions.act_window">
            <field name="name">Reporte PLE</field>
            <field name="res_model">ple.report.base</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="menu_ple" name="Registro PLE" parent="menu_ple_pe_root" action="ple_report_base_action" sequence="1"/>

    </data>
</odoo>
